{% extends "one.html" %}
{% block title %} Test Ops {% endblock %}
{% block head %}
    {{ super() }}
    <style type="text/css">
      #run {color: black;}
      .ops_button {color: black;}
    </style>
    <link rel="stylesheet" type="text/css" href="/static/css/powerMeter.css">
    <link rel="stylesheet" type="text/css" href="/static/css/specanal.css">

{% endblock %}
{% block content %}
<div class="col-md-8 col-md-offset-2">
	<div class="row">
		<h1>Operator Page</h1>
		<h3>Test Overview</h3>
		<p>[overview and test info goes here]</p>
<!-- Code for variable form type run -->
<!-- 	<p>{{config}}</p>
		<br>
		<form name="runTest" enctype="application/json" action="{{data.testplan_name}}/run" method="post">
			<p>Execute config: <button type="submit" id="run">Run</button></p>
			<input type="hidden" name="info[0]" value="{{data.company_nickname}}">
			<input type="hidden" name="info[1]" value="{{data.testplan_name}}">
		</form> -->

		<button style="margin-left:15px" class="text-capitalize optionsBtn" type="button" id="powerMeterStartStop">Start</button>
		<hr>
	</div>
	<div class= "row">
		<h3>Results</h3>
		   <div id="powerMeterBox" class="PowerMeterInstBox">
              <h2 class="row" id="instrumentName" class="instname" style="margin:5px 0 0 20px; color: white;">Power Meter</h2>
              <h4 class="row" id="hardwareName" class="hardwareName" style="margin:0 0 0 20px"></h4>
              <span onclick="" class="closePM glyphicon glyphicon-remove-circle" style="left:97.5%; top: -30px; color:white; font-size: 130%"></span>
              <div class="row">
                <div class="col-md-5" id="leftDisplay">
                  <div class="row">
                    <div class="" id="valueBox">
                      <h3>
                        <span id="measurementValue" class="valueDisplay" style=""></span>
                        <span id="PMUnits" class="unitsDisplay" style=""></span>
                      </h3> 
                      
                    </div>
                  </div>
                  <div class="row">  
                    <div id="PMSettingsDisplay" class="col-md-3 configInfoBox" style="margin-left: 5px;">
                      <h6 style="margin-bottom: 0px;"><span style="margin-right:3px;">Config:</span><span class="configSettings"></span><span style="position:absolute; left:150px; margin-right:3px;">Trace:</span><span style="position:absolute; left:190px;"></span></h6>
                      <h6 style="margin-bottom: 0px;"><span style="margin-right:3px;">FC:</span><span class="configSettings"></span><span style="position:absolute; left:150px; margin-right:3px;">Offset:</span><span style="position:absolute; left:195px;"></span></h6>
                    </div>
                    <div class="col-md-2 statusInfoBox" style="margin-left:10px;">
                      <h5 style="margin-bottom: 0px; text-align:center;">Status <span id="currentStatus" class="status"></span> </h5>   
                    </div>
                  </div> 
                </div>
            </div>
        </div>
        <br>
		<p>[test results should go here]</p>
		<p>{{data.results}}</p>
		<p>Return to test library:
		<a href="/testlibrary/{{data.company_nickname}}"><button>Done</button></a>
		</p>
		<hr>
	</div>
	<div class= "row">
		<h4>Comments</h4>
		{% for comment in data.comment_thread %}
		<hr>
		<p>{{comment.content}}</p>
		<p>by {{comment.author}} at {{comment.timestamp}}</p>
		{% endfor %}

		<textarea name="content" id="content" form="usrform" rows="5" cols="50">Enter comment here...</textarea>
		<form action="/operator/{{data.company_nickname}}/{{data.hardware_name}}/{{data.config_name}}/{{data.start_tse}}" method="post" id="usrform">
			<input type="hidden" name="testplan" value="{{data.testplan_name}}">
            <input class="ops_button" type="submit">
		</form>

		<p id="debugger">DEBUG ON</p>
		<p id="feedback"></p>
	</div>
</div>

<script type="text/javascript">
  var instrument_config = {
  configName : '{{data.config_name}}',
  traceName : '{{data.testplan_name}}',
  frequencyCorrection : '{{instrument_config.correction_frequency}}',
  offset : '{{instrument_config.offset}}',
  units : '{{instrument_config.units}}',
  avgCountAuto : '{{instrument_config.averaging_count_auto}}',
  rangeAuto : '{{instrument_config.range_auto}}',
  };

// window.onload = function() {myFunction()};
$( document ).ready(function(){OPConfig(instrument_config);});

// document.getElementById("debugger").onload = function() {myFunction()};
// function myFunction() {
//     document.getElementById("feedback").innerHTML = "Debugger is loaded.";
// }
</script>

<script type="text/javascript" src="/static/js/powerMeter.js"></script>
<script typo="text/javascript" src="/static/js/testops.js"></script>
<script type="text/javascript">

  // window.onload = function() {OPConfig(instrument_config)};
  // $( document ).ready(function() {
  // OPConfig(instrument_config);
  // });
</script>


{% endblock %}