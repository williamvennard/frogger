import grequests
import time
import datetime 
import math
import itertools
import json
import requests

def get_payload(URL, payload_dict):
    end = URL.split("/")[-1]
    return payload_dict[int(end)]

URL_list_raw = ["https://gradientone-prod.appspot.com/bscopedata/Acme/Tahoe/primetime/1437091671000",
        "https://gradientone-prod.appspot.com/bscopedata/Acme/Tahoe/primetime/1437091671100",
        "https://gradientone-prod.appspot.com/bscopedata/Acme/Tahoe/primetime/1437091671200",]
payload_dict = {1437091671000: '[1.6328125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.76171875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.6328125, 1.6328125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.6328125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.71875, 1.67578125, 1.67578125, 1.6328125, 1.6328125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.6328125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.67578125, 1.67578125, 1.6328125, 1.6328125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.71875, 1.71875, 1.67578125, 1.6328125, 1.6328125]', 1437091671100: '[1.6328125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.6328125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.8046875, 1.84765625, 1.6328125, 1.93359375, 1.8046875, 1.8046875, 1.71875, 1.71875, 1.6328125, 1.6328125, 1.67578125, 1.6328125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.76171875, 1.8046875, 1.8046875, 1.71875, 1.71875, 1.71875, 1.6328125, 1.67578125, 1.67578125, 1.6328125, 1.67578125, 1.71875, 1.76171875, 1.67578125, 1.71875, 1.76171875, 1.76171875, 1.76171875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.76171875, 1.76171875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.76171875, 1.6328125, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.76171875, 1.76171875, 1.8046875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125]', 1437091671200: '[1.67578125, 1.6328125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.76171875, 1.76171875, 1.8046875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.6328125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.76171875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.6328125, 1.67578125, 1.67578125, 1.67578125, 1.67578125, 1.71875, 1.71875, 1.71875, 1.8046875, 1.8046875, 1.76171875, 1.76171875, 1.76171875, 1.71875, 1.71875, 1.71875, 1.67578125, 1.67578125, 1.67578125]'}
headers = {'Content-type': 'application/json', 'Accept': 'text/plain'}
rs = (grequests.post(u, json=get_payload(u, payload_dict), headers=headers) for u in URL_list_raw)
start_post = time.time()
grequests.map(rs)
finish_post = time.time()
print 'grequests time', finish_post - start_post


